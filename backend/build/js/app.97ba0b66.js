(function(e){function t(t){for(var r,o,c=t[0],u=t[1],s=t[2],l=0,b=[];l<c.length;l++)o=c[l],Object.prototype.hasOwnProperty.call(i,o)&&i[o]&&b.push(i[o][0]),i[o]=0;for(r in u)Object.prototype.hasOwnProperty.call(u,r)&&(e[r]=u[r]);d&&d(t);while(b.length)b.shift()();return a.push.apply(a,s||[]),n()}function n(){for(var e,t=0;t<a.length;t++){for(var n=a[t],r=!0,c=1;c<n.length;c++){var u=n[c];0!==i[u]&&(r=!1)}r&&(a.splice(t--,1),e=o(o.s=n[0]))}return e}var r={},i={app:0},a=[];function o(t){if(r[t])return r[t].exports;var n=r[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,o),n.l=!0,n.exports}o.m=e,o.c=r,o.d=function(e,t,n){o.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},o.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.t=function(e,t){if(1&t&&(e=o(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(o.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)o.d(n,r,function(t){return e[t]}.bind(null,r));return n},o.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return o.d(t,"a",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p="/";var c=window["webpackJsonp"]=window["webpackJsonp"]||[],u=c.push.bind(c);c.push=t,c=c.slice();for(var s=0;s<c.length;s++)t(c[s]);var d=u;a.push([0,"chunk-vendors"]),n()})({0:function(e,t,n){e.exports=n("56d7")},"0105":function(e,t,n){},1235:function(e,t,n){},"12f2":function(e,t,n){"use strict";n("d207")},"1b49":function(e,t,n){"use strict";n("7760")},4330:function(e,t,n){},"46fb":function(e,t,n){"use strict";n("4330")},"56d7":function(e,t,n){"use strict";n.r(t);n("e260"),n("e6cf"),n("cca6"),n("a79d");var r=n("7a23"),i={class:"router-view"};function a(e,t,n,a,o,c){var u=Object(r["z"])("PageHeader"),s=Object(r["z"])("router-view");return Object(r["s"])(),Object(r["f"])("div",null,[Object(r["i"])(u),Object(r["g"])("div",i,[Object(r["i"])(s)])])}var o={class:"wrapper"},c=Object(r["h"])("Matdagboken"),u={class:"wrapperChild userInfo"},s={key:0},d={key:1},l=Object(r["h"])("Logga in");function b(e,t,n,i,a,b){var f=this,p=Object(r["z"])("router-link");return Object(r["s"])(),Object(r["f"])("div",o,[Object(r["i"])(p,{to:"/",class:"wrapperChild header"},{default:Object(r["G"])((function(){return[c]})),_:1}),Object(r["g"])("div",u,[e.user?(Object(r["s"])(),Object(r["f"])("div",s,[Object(r["h"])(Object(r["B"])(e.user.username)+" ",1),Object(r["g"])("span",{onClick:t[0]||(t[0]=function(e){f.$store.commit("logoutUser"),f.$router.push("/")})},"Logga ut")])):(Object(r["s"])(),Object(r["f"])("div",d,[Object(r["i"])(p,{to:"/login"},{default:Object(r["G"])((function(){return[l]})),_:1})]))])])}var f=n("5502"),p={computed:Object(f["b"])({user:"currentUser"})},g=(n("46fb"),n("6b0d")),O=n.n(g);const j=O()(p,[["render",b],["__scopeId","data-v-3c19b3f3"]]);var m=j,h={components:{PageHeader:m},beforeCreate:function(){this.$store.commit("initializeStore")}};n("dc9f");const v=O()(h,[["render",a]]);var y=v,k=n("6c02"),I=(n("b0c0"),function(e){return Object(r["v"])("data-v-38abfaf8"),e=e(),Object(r["t"])(),e}),x={key:0},w=Object(r["h"])("Lägg till ny ingrediens"),C=Object(r["h"])("Lägg till måltid"),L={class:"content"},U=I((function(){return Object(r["g"])("span",{class:"boxInfo"},"523 kalorier",-1)})),_={class:"ingredientTable"},M=I((function(){return Object(r["g"])("thead",null,[Object(r["g"])("tr",null,[Object(r["g"])("th",null,"Vad"),Object(r["g"])("th",null,"Gram"),Object(r["g"])("th",null,"Kalorier")])],-1)})),S={key:1},T=I((function(){return Object(r["g"])("h2",null,"Matdagboken",-1)})),A=I((function(){return Object(r["g"])("p",null,"Här kan du bokföra dina måltider. Logga in uppe till höger",-1)})),H=[T,A];function N(e,t,n,i,a,o){var c=Object(r["z"])("router-link");return Object(r["s"])(),Object(r["f"])("div",null,[e.user?(Object(r["s"])(),Object(r["f"])("div",x,[Object(r["i"])(c,{to:"/add-ingredient",class:"boxLink"},{default:Object(r["G"])((function(){return[w]})),_:1}),Object(r["i"])(c,{to:"/add-meal",class:"boxLink"},{default:Object(r["G"])((function(){return[C]})),_:1}),Object(r["g"])("div",L,[(Object(r["s"])(!0),Object(r["f"])(r["a"],null,Object(r["y"])(a.meals,(function(e){return Object(r["s"])(),Object(r["f"])("div",{key:e.meal_id,class:"vertical-margin"},[Object(r["g"])("h2",null,[Object(r["h"])(Object(r["B"])(e.meal_name)+" ",1),U]),Object(r["g"])("table",_,[M,Object(r["g"])("tbody",null,[(Object(r["s"])(!0),Object(r["f"])(r["a"],null,Object(r["y"])(e.ingredients,(function(e){return Object(r["s"])(),Object(r["f"])("tr",{key:e.id},[Object(r["g"])("td",null,Object(r["B"])(e.name),1),Object(r["g"])("td",null,Object(r["B"])(e.amount),1),Object(r["g"])("td",null,Object(r["B"])(e.energy),1)])})),128))])])])})),128))])])):(Object(r["s"])(),Object(r["f"])("div",S,H))])}var P=n("5530"),B=(n("d3b7"),n("159b"),n("99af"),{data:function(){return{consumption:[],meals:[]}},created:function(){this.user&&this.fetchConsumption()},computed:Object(P["a"])({totalCalories:function(){var e=0;return this.consumption.forEach((function(t){e+=t.energy})),e}},Object(f["b"])({user:"currentUser"})),methods:{fetchConsumption:function(){var e=this,t=new Date;fetch("http://192.168.1.9:3000/consumption/day/".concat(t.getFullYear(),"-").concat(t.getMonth()+1,"-").concat(t.getDate()),{headers:{"Content-Type":"application/json",Authorization:"Bearer "+this.user.token}}).then((function(e){return e.json()})).then((function(t){t.ok&&(e.meals=t.data)}))}}});n("12f2");const z=O()(B,[["render",N],["__scopeId","data-v-38abfaf8"]]);var E=z,G=function(e){return Object(r["v"])("data-v-478e6080"),e=e(),Object(r["t"])(),e},V=G((function(){return Object(r["g"])("h2",null,"Logga in",-1)})),J={key:0,class:"errorMsg"};function $(e,t,n,i,a,o){return Object(r["s"])(),Object(r["f"])("div",null,[V,Object(r["g"])("form",null,[a.errorMsg?(Object(r["s"])(),Object(r["f"])("p",J,Object(r["B"])(a.errorMsg),1)):Object(r["e"])("",!0),Object(r["H"])(Object(r["g"])("input",{class:"standardInput",type:"text","onUpdate:modelValue":t[0]||(t[0]=function(e){return a.username=e}),placeholder:"Användarnamn"},null,512),[[r["E"],a.username]]),Object(r["H"])(Object(r["g"])("input",{class:"standardInput",type:"password","onUpdate:modelValue":t[1]||(t[1]=function(e){return a.password=e}),placeholder:"Lösenord"},null,512),[[r["E"],a.password]]),Object(r["g"])("button",{class:"standardButton",onClick:t[2]||(t[2]=Object(r["I"])((function(){return o.loginUser&&o.loginUser.apply(o,arguments)}),["prevent"]))}," Logga in ")])])}n("e9c4");var F={data:function(){return{errorMsg:null,username:"",password:""}},computed:Object(f["b"])({user:"currentUser"}),methods:{loginUser:function(){var e=this;fetch("http://192.168.1.9:3000/auth/login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:this.username,password:this.password})}).then((function(e){return e.json()})).then((function(t){if(t.ok){var n={token:t.token,username:t.username};e.$store.commit("loginUser",n),e.$router.push("/")}else e.errorMsg=t.msg})).catch((function(t){e.errorMsg="Något gick fel :( Meddelande: "+t}))}}};n("1b49");const K=O()(F,[["render",$],["__scopeId","data-v-478e6080"]]);var D=K;function Y(e,t,n,i,a,o){return Object(r["s"])(),Object(r["f"])("div",null,"Add ingredient")}var q={};const Q=O()(q,[["render",Y]]);var R=Q,W={key:0},X=Object(r["g"])("p",null,"Måltiden inlagd!",-1),Z={key:1};function ee(e,t,n,i,a,o){var c=this,u=Object(r["z"])("IngredientForm");return Object(r["s"])(),Object(r["f"])("div",null,[Object(r["g"])("h2",{onClick:t[0]||(t[0]=function(){return e.printIngredients&&e.printIngredients.apply(e,arguments)})},"Ny måltid"),a.mealAdded?(Object(r["s"])(),Object(r["f"])("div",W,[X,Object(r["g"])("span",{class:"boxLink boxLink-primary",onClick:t[1]||(t[1]=function(e){return c.$router.push("/")})},"Gå till startsidan"),Object(r["g"])("span",{class:"boxLink boxLink-secondary",onClick:t[2]||(t[2]=function(){return o.resetForm&&o.resetForm.apply(o,arguments)})},"Lägg till ny")])):(Object(r["s"])(),Object(r["f"])("div",Z,[Object(r["g"])("span",{class:"boxLink boxLink-secondary",onClick:t[3]||(t[3]=function(){return o.addMeal&&o.addMeal.apply(o,arguments)})},"Lägg till måltiden"),Object(r["g"])("p",null,"Kalorier totalt: "+Object(r["B"])(o.totalCalories),1),Object(r["H"])(Object(r["g"])("input",{class:"standardInput vertical-margin",type:"text","onUpdate:modelValue":t[4]||(t[4]=function(e){return a.mealName=e}),placeholder:"Ge måltiden ett namn..."},null,512),[[r["E"],a.mealName]]),(Object(r["s"])(!0),Object(r["f"])(r["a"],null,Object(r["y"])(a.ingredients,(function(e){return Object(r["s"])(),Object(r["d"])(u,{key:e.name,info:e,database:a.databaseIngredients,onUpdateInfo:o.updateIngredient},null,8,["info","database","onUpdateInfo"])})),128)),Object(r["g"])("span",{class:"boxLink boxLink-primary",onClick:t[5]||(t[5]=function(e){return a.ingredients.push({id:a.ingredients.length,name:""})})},"+ Lägg till rad")]))])}n("d81d"),n("4de4");var te=function(e){return Object(r["v"])("data-v-be066b04"),e=e(),Object(r["t"])(),e},ne={id:"ingredients"},re=["value"],ie={key:0,class:"ingredientInfo"},ae={key:0,class:"boxInfo boxInfo-primary"},oe=["id"],ce=["for"],ue={class:"ingredientTable"},se=te((function(){return Object(r["g"])("td",null,[Object(r["g"])("span",{class:"inputHeader"},"Gram")],-1)})),de=te((function(){return Object(r["g"])("td",null,[Object(r["g"])("span",{class:"inputHeader"},"Kalorier per 100g")],-1)}));function le(e,t,n,i,a,o){return Object(r["s"])(),Object(r["f"])("div",{class:"wrapper",onChange:t[6]||(t[6]=function(t){return e.$emit("updateInfo",a.ingredient)})},[Object(r["H"])(Object(r["g"])("input",{"onUpdate:modelValue":t[0]||(t[0]=function(e){return a.ingredient.name=e}),autocomplete:"off",list:"ingredients",placeholder:"Ange ingrediens",class:"ingredient",type:"text",onChange:t[1]||(t[1]=function(){return o.updateIngredientInfo&&o.updateIngredientInfo.apply(o,arguments)}),onKeyup:t[2]||(t[2]=function(){return o.updateIngredientInfo&&o.updateIngredientInfo.apply(o,arguments)})},null,544),[[r["E"],a.ingredient.name]]),Object(r["g"])("datalist",ne,[(Object(r["s"])(!0),Object(r["f"])(r["a"],null,Object(r["y"])(n.database,(function(e){return Object(r["s"])(),Object(r["f"])("option",{key:e.name,value:e.name},null,8,re)})),128))]),a.ingredient.name?(Object(r["s"])(),Object(r["f"])("div",ie,[a.ingredient.predefined?Object(r["e"])("",!0):(Object(r["s"])(),Object(r["f"])("p",ae," Ny ingrediens ")),a.ingredient.predefined?Object(r["e"])("",!0):(Object(r["s"])(),Object(r["f"])("div",{key:1,class:Object(r["o"])(["boxInfo boxInfo-primary boxCheck",{"boxCheck-active":a.ingredient.addTemplate,"boxCheck-inactive":!a.ingredient.addTemplate}])},[Object(r["H"])(Object(r["g"])("input",{type:"checkbox","onUpdate:modelValue":t[3]||(t[3]=function(e){return a.ingredient.addTemplate=e}),name:"",id:"checkbox"+a.ingredient.id,value:"wow"},null,8,oe),[[r["D"],a.ingredient.addTemplate]]),Object(r["g"])("label",{for:"checkbox"+a.ingredient.id},"Lägg till mall",8,ce)],2)),Object(r["g"])("table",ue,[Object(r["g"])("tbody",null,[Object(r["g"])("tr",null,[se,Object(r["g"])("td",null,[Object(r["H"])(Object(r["g"])("input",{class:"ingredientInfoInput",type:"text",placeholder:"Ange antal gram","onUpdate:modelValue":t[4]||(t[4]=function(e){return a.ingredient.amount=e})},null,512),[[r["E"],a.ingredient.amount]])])]),Object(r["g"])("tr",null,[de,Object(r["g"])("td",null,[Object(r["H"])(Object(r["g"])("input",{class:"ingredientInfoInput",type:"text",placeholder:"Ange kalorier","onUpdate:modelValue":t[5]||(t[5]=function(e){return a.ingredient.calories=e})},null,512),[[r["E"],a.ingredient.calories]])])])])])])):Object(r["e"])("",!0)],32)}n("7db0");var be={emits:["updateInfo"],props:{info:Object,database:Array},created:function(){this.ingredient.id=this.info.id,this.ingredient.name=this.info.name,this.updateIngredientInfo()},data:function(){return{ingredient:{addTemplate:!1,predefined:!1,id:0,name:"",amount:"",calories:"",protein:"",fat:"",carbon:""}}},methods:{updateIngredientInfo:function(){var e=this,t=this.database.find((function(t){return t.name.toLowerCase()==e.ingredient.name.toLowerCase()}));t?(this.ingredient.predefined=!0,this.ingredient.name=t.name,this.ingredient.calories=t.calories):this.ingredient.predefined=!1}}};n("be40");const fe=O()(be,[["render",le],["__scopeId","data-v-be066b04"]]);var pe=fe,ge={data:function(){return{mealName:"",ingredients:[{id:0,name:""}],databaseIngredients:[],mealAdded:!1}},created:function(){var e=this;fetch("http://192.168.1.9:3000/ingredients").then((function(e){return e.json()})).then((function(t){t.ok&&(e.databaseIngredients=t.data)}))},computed:Object(P["a"])({totalCalories:function(){var e=0;return this.ingredients.forEach((function(t){var n=parseInt(t.amount),r=parseInt(t.calories);n>0&&r>0&&(e+=n*r/100)})),Math.round(e)}},Object(f["b"])({user:"currentUser"})),components:{IngredientForm:pe},methods:{resetForm:function(){this.ingredients=[{id:0,name:""}],this.mealAdded=!1},updateIngredient:function(e){this.ingredients=this.ingredients.map((function(t){return t.id==e.id?e:t}))},addMeal:function(){var e=this,t=this.ingredients.filter((function(e){return e.name&&e.amount})),n=this.ingredients.filter((function(e){return e.addTemplate}));fetch("http://192.168.1.9:3000/ingredients/add",{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer "+this.user.token},body:JSON.stringify({ingredients:n})}),fetch("http://192.168.1.9:3000/consumption/add",{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer "+this.user.token},body:JSON.stringify({meal_name:this.mealName,consumption:t})}).then((function(e){return e.json()})).then((function(t){t.ok&&(e.mealAdded=!0)}))}}};const Oe=O()(ge,[["render",ee]]);var je=Oe,me=[{path:"/",name:"Home",component:E},{path:"/login",component:D},{path:"/add-ingredient",component:R},{path:"/add-meal",component:je}],he=Object(k["a"])({history:Object(k["b"])("/"),routes:me}),ve=he,ye=Object(f["a"])({state:{user:null},getters:{currentUser:function(e){return e.user}},mutations:{loginUser:function(e,t){e.user=t,localStorage.setItem("user",JSON.stringify(t))},logoutUser:function(e){localStorage.removeItem("user"),e.user=null},initializeStore:function(e){var t=localStorage.getItem("user");t&&(e.user=JSON.parse(t))}},actions:{},modules:{}});Object(r["c"])(y).use(ye).use(ve).mount("#app")},7760:function(e,t,n){},be40:function(e,t,n){"use strict";n("0105")},d207:function(e,t,n){},dc9f:function(e,t,n){"use strict";n("1235")}});
//# sourceMappingURL=app.97ba0b66.js.map